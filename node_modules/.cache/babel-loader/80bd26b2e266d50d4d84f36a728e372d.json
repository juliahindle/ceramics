{"ast":null,"code":"\"use strict\"; // Copyright 2015 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nvar _regeneratorRuntime = require(\"/Users/juliahindle/Documents/GitHub/ceramics/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\n\nvar _asyncToGenerator = require(\"/Users/juliahindle/Documents/GitHub/ceramics/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n\nvar _classCallCheck = require(\"/Users/juliahindle/Documents/GitHub/ceramics/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"/Users/juliahindle/Documents/GitHub/ceramics/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar _get = require(\"/Users/juliahindle/Documents/GitHub/ceramics/node_modules/@babel/runtime/helpers/get.js\").default;\n\nvar _getPrototypeOf = require(\"/Users/juliahindle/Documents/GitHub/ceramics/node_modules/@babel/runtime/helpers/getPrototypeOf.js\").default;\n\nvar _inherits = require(\"/Users/juliahindle/Documents/GitHub/ceramics/node_modules/@babel/runtime/helpers/inherits.js\").default;\n\nvar _createSuper = require(\"/Users/juliahindle/Documents/GitHub/ceramics/node_modules/@babel/runtime/helpers/createSuper.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserRefreshClient = void 0;\n\nvar oauth2client_1 = require(\"./oauth2client\");\n\nvar UserRefreshClient = /*#__PURE__*/function (_oauth2client_1$OAuth) {\n  _inherits(UserRefreshClient, _oauth2client_1$OAuth);\n\n  var _super = _createSuper(UserRefreshClient);\n\n  function UserRefreshClient(optionsOrClientId, clientSecret, refreshToken, eagerRefreshThresholdMillis, forceRefreshOnFailure) {\n    var _this;\n\n    _classCallCheck(this, UserRefreshClient);\n\n    var opts = optionsOrClientId && typeof optionsOrClientId === 'object' ? optionsOrClientId : {\n      clientId: optionsOrClientId,\n      clientSecret: clientSecret,\n      refreshToken: refreshToken,\n      eagerRefreshThresholdMillis: eagerRefreshThresholdMillis,\n      forceRefreshOnFailure: forceRefreshOnFailure\n    };\n    _this = _super.call(this, {\n      clientId: opts.clientId,\n      clientSecret: opts.clientSecret,\n      eagerRefreshThresholdMillis: opts.eagerRefreshThresholdMillis,\n      forceRefreshOnFailure: opts.forceRefreshOnFailure\n    });\n    _this._refreshToken = opts.refreshToken;\n    _this.credentials.refresh_token = opts.refreshToken;\n    return _this;\n  }\n  /**\n   * Refreshes the access token.\n   * @param refreshToken An ignored refreshToken..\n   * @param callback Optional callback.\n   */\n\n\n  _createClass(UserRefreshClient, [{\n    key: \"refreshTokenNoCache\",\n    value: function () {\n      var _refreshTokenNoCache = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee( // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      refreshToken) {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", _get(_getPrototypeOf(UserRefreshClient.prototype), \"refreshTokenNoCache\", this).call(this, this._refreshToken));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function refreshTokenNoCache(_x) {\n        return _refreshTokenNoCache.apply(this, arguments);\n      }\n\n      return refreshTokenNoCache;\n    }()\n    /**\n     * Create a UserRefreshClient credentials instance using the given input\n     * options.\n     * @param json The input object.\n     */\n\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      if (!json) {\n        throw new Error('Must pass in a JSON object containing the user refresh token');\n      }\n\n      if (json.type !== 'authorized_user') {\n        throw new Error('The incoming JSON object does not have the \"authorized_user\" type');\n      }\n\n      if (!json.client_id) {\n        throw new Error('The incoming JSON object does not contain a client_id field');\n      }\n\n      if (!json.client_secret) {\n        throw new Error('The incoming JSON object does not contain a client_secret field');\n      }\n\n      if (!json.refresh_token) {\n        throw new Error('The incoming JSON object does not contain a refresh_token field');\n      }\n\n      this._clientId = json.client_id;\n      this._clientSecret = json.client_secret;\n      this._refreshToken = json.refresh_token;\n      this.credentials.refresh_token = json.refresh_token;\n      this.quotaProjectId = json.quota_project_id;\n    }\n  }, {\n    key: \"fromStream\",\n    value: function fromStream(inputStream, callback) {\n      if (callback) {\n        this.fromStreamAsync(inputStream).then(function () {\n          return callback();\n        }, callback);\n      } else {\n        return this.fromStreamAsync(inputStream);\n      }\n    }\n  }, {\n    key: \"fromStreamAsync\",\n    value: function () {\n      var _fromStreamAsync = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(inputStream) {\n        var _this2 = this;\n\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  if (!inputStream) {\n                    return reject(new Error('Must pass in a stream containing the user refresh token.'));\n                  }\n\n                  var s = '';\n                  inputStream.setEncoding('utf8').on('error', reject).on('data', function (chunk) {\n                    return s += chunk;\n                  }).on('end', function () {\n                    try {\n                      var data = JSON.parse(s);\n\n                      _this2.fromJSON(data);\n\n                      return resolve();\n                    } catch (err) {\n                      return reject(err);\n                    }\n                  });\n                }));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function fromStreamAsync(_x2) {\n        return _fromStreamAsync.apply(this, arguments);\n      }\n\n      return fromStreamAsync;\n    }()\n  }]);\n\n  return UserRefreshClient;\n}(oauth2client_1.OAuth2Client);\n\nexports.UserRefreshClient = UserRefreshClient;","map":{"version":3,"names":["Object","defineProperty","exports","value","UserRefreshClient","oauth2client_1","require","optionsOrClientId","clientSecret","refreshToken","eagerRefreshThresholdMillis","forceRefreshOnFailure","opts","clientId","_refreshToken","credentials","refresh_token","json","Error","type","client_id","client_secret","_clientId","_clientSecret","quotaProjectId","quota_project_id","inputStream","callback","fromStreamAsync","then","Promise","resolve","reject","s","setEncoding","on","chunk","data","JSON","parse","fromJSON","err","OAuth2Client"],"sources":["/Users/juliahindle/Documents/GitHub/ceramics/node_modules/google-auth-library/build/src/auth/refreshclient.js"],"sourcesContent":["\"use strict\";\n// Copyright 2015 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UserRefreshClient = void 0;\nconst oauth2client_1 = require(\"./oauth2client\");\nclass UserRefreshClient extends oauth2client_1.OAuth2Client {\n    constructor(optionsOrClientId, clientSecret, refreshToken, eagerRefreshThresholdMillis, forceRefreshOnFailure) {\n        const opts = optionsOrClientId && typeof optionsOrClientId === 'object'\n            ? optionsOrClientId\n            : {\n                clientId: optionsOrClientId,\n                clientSecret,\n                refreshToken,\n                eagerRefreshThresholdMillis,\n                forceRefreshOnFailure,\n            };\n        super({\n            clientId: opts.clientId,\n            clientSecret: opts.clientSecret,\n            eagerRefreshThresholdMillis: opts.eagerRefreshThresholdMillis,\n            forceRefreshOnFailure: opts.forceRefreshOnFailure,\n        });\n        this._refreshToken = opts.refreshToken;\n        this.credentials.refresh_token = opts.refreshToken;\n    }\n    /**\n     * Refreshes the access token.\n     * @param refreshToken An ignored refreshToken..\n     * @param callback Optional callback.\n     */\n    async refreshTokenNoCache(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    refreshToken) {\n        return super.refreshTokenNoCache(this._refreshToken);\n    }\n    /**\n     * Create a UserRefreshClient credentials instance using the given input\n     * options.\n     * @param json The input object.\n     */\n    fromJSON(json) {\n        if (!json) {\n            throw new Error('Must pass in a JSON object containing the user refresh token');\n        }\n        if (json.type !== 'authorized_user') {\n            throw new Error('The incoming JSON object does not have the \"authorized_user\" type');\n        }\n        if (!json.client_id) {\n            throw new Error('The incoming JSON object does not contain a client_id field');\n        }\n        if (!json.client_secret) {\n            throw new Error('The incoming JSON object does not contain a client_secret field');\n        }\n        if (!json.refresh_token) {\n            throw new Error('The incoming JSON object does not contain a refresh_token field');\n        }\n        this._clientId = json.client_id;\n        this._clientSecret = json.client_secret;\n        this._refreshToken = json.refresh_token;\n        this.credentials.refresh_token = json.refresh_token;\n        this.quotaProjectId = json.quota_project_id;\n    }\n    fromStream(inputStream, callback) {\n        if (callback) {\n            this.fromStreamAsync(inputStream).then(() => callback(), callback);\n        }\n        else {\n            return this.fromStreamAsync(inputStream);\n        }\n    }\n    async fromStreamAsync(inputStream) {\n        return new Promise((resolve, reject) => {\n            if (!inputStream) {\n                return reject(new Error('Must pass in a stream containing the user refresh token.'));\n            }\n            let s = '';\n            inputStream\n                .setEncoding('utf8')\n                .on('error', reject)\n                .on('data', chunk => (s += chunk))\n                .on('end', () => {\n                try {\n                    const data = JSON.parse(s);\n                    this.fromJSON(data);\n                    return resolve();\n                }\n                catch (err) {\n                    return reject(err);\n                }\n            });\n        });\n    }\n}\nexports.UserRefreshClient = UserRefreshClient;\n//# sourceMappingURL=refreshclient.js.map"],"mappings":"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"},"metadata":{},"sourceType":"script"}