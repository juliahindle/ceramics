{"ast":null,"code":"\"use strict\"; // Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nvar _classCallCheck = require(\"/Users/juliahindle/Documents/GitHub/ceramics/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"/Users/juliahindle/Documents/GitHub/ceramics/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DefaultTransporter = void 0;\n\nvar gaxios_1 = require(\"gaxios\");\n\nvar options_1 = require(\"./options\"); // eslint-disable-next-line @typescript-eslint/no-var-requires\n\n\nvar pkg = require('../../package.json');\n\nvar PRODUCT_NAME = 'google-api-nodejs-client';\n\nvar DefaultTransporter = /*#__PURE__*/function () {\n  function DefaultTransporter() {\n    _classCallCheck(this, DefaultTransporter);\n  }\n\n  _createClass(DefaultTransporter, [{\n    key: \"configure\",\n    value:\n    /**\n     * Configures request options before making a request.\n     * @param opts GaxiosOptions options.\n     * @return Configured options.\n     */\n    function configure() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      opts.headers = opts.headers || {};\n\n      if (typeof window === 'undefined') {\n        // set transporter user agent if not in browser\n        var uaValue = opts.headers['User-Agent'];\n\n        if (!uaValue) {\n          opts.headers['User-Agent'] = DefaultTransporter.USER_AGENT;\n        } else if (!uaValue.includes(\"\".concat(PRODUCT_NAME, \"/\"))) {\n          opts.headers['User-Agent'] = \"\".concat(uaValue, \" \").concat(DefaultTransporter.USER_AGENT);\n        } // track google-auth-library-nodejs version:\n\n\n        var authVersion = \"auth/\".concat(pkg.version);\n\n        if (opts.headers['x-goog-api-client'] && !opts.headers['x-goog-api-client'].includes(authVersion)) {\n          opts.headers['x-goog-api-client'] = \"\".concat(opts.headers['x-goog-api-client'], \" \").concat(authVersion);\n        } else if (!opts.headers['x-goog-api-client']) {\n          var nodeVersion = process.version.replace(/^v/, '');\n          opts.headers['x-goog-api-client'] = \"gl-node/\".concat(nodeVersion, \" \").concat(authVersion);\n        }\n      }\n\n      return opts;\n    }\n  }, {\n    key: \"request\",\n    value: function request(opts, callback) {\n      var _this = this;\n\n      // ensure the user isn't passing in request-style options\n      opts = this.configure(opts);\n\n      try {\n        options_1.validate(opts);\n      } catch (e) {\n        if (callback) {\n          return callback(e);\n        } else {\n          throw e;\n        }\n      }\n\n      if (callback) {\n        gaxios_1.request(opts).then(function (r) {\n          callback(null, r);\n        }, function (e) {\n          callback(_this.processError(e));\n        });\n      } else {\n        return gaxios_1.request(opts).catch(function (e) {\n          throw _this.processError(e);\n        });\n      }\n    }\n    /**\n     * Changes the error to include details from the body.\n     */\n\n  }, {\n    key: \"processError\",\n    value: function processError(e) {\n      var res = e.response;\n      var err = e;\n      var body = res ? res.data : null;\n\n      if (res && body && body.error && res.status !== 200) {\n        if (typeof body.error === 'string') {\n          err.message = body.error;\n          err.code = res.status.toString();\n        } else if (Array.isArray(body.error.errors)) {\n          err.message = body.error.errors.map(function (err2) {\n            return err2.message;\n          }).join('\\n');\n          err.code = body.error.code;\n          err.errors = body.error.errors;\n        } else {\n          err.message = body.error.message;\n          err.code = body.error.code || res.status;\n        }\n      } else if (res && res.status >= 400) {\n        // Consider all 4xx and 5xx responses errors.\n        err.message = body;\n        err.code = res.status.toString();\n      }\n\n      return err;\n    }\n  }]);\n\n  return DefaultTransporter;\n}();\n\nexports.DefaultTransporter = DefaultTransporter;\n/**\n * Default user agent.\n */\n\nDefaultTransporter.USER_AGENT = \"\".concat(PRODUCT_NAME, \"/\").concat(pkg.version);","map":{"version":3,"names":["Object","defineProperty","exports","value","DefaultTransporter","gaxios_1","require","options_1","pkg","PRODUCT_NAME","opts","headers","window","uaValue","USER_AGENT","includes","authVersion","version","nodeVersion","process","replace","callback","configure","validate","e","request","then","r","processError","catch","res","response","err","body","data","error","status","message","code","toString","Array","isArray","errors","map","err2","join"],"sources":["/Users/juliahindle/Documents/GitHub/ceramics/node_modules/google-auth-library/build/src/transporters.js"],"sourcesContent":["\"use strict\";\n// Copyright 2019 Google LLC\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultTransporter = void 0;\nconst gaxios_1 = require(\"gaxios\");\nconst options_1 = require(\"./options\");\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst pkg = require('../../package.json');\nconst PRODUCT_NAME = 'google-api-nodejs-client';\nclass DefaultTransporter {\n    /**\n     * Configures request options before making a request.\n     * @param opts GaxiosOptions options.\n     * @return Configured options.\n     */\n    configure(opts = {}) {\n        opts.headers = opts.headers || {};\n        if (typeof window === 'undefined') {\n            // set transporter user agent if not in browser\n            const uaValue = opts.headers['User-Agent'];\n            if (!uaValue) {\n                opts.headers['User-Agent'] = DefaultTransporter.USER_AGENT;\n            }\n            else if (!uaValue.includes(`${PRODUCT_NAME}/`)) {\n                opts.headers['User-Agent'] = `${uaValue} ${DefaultTransporter.USER_AGENT}`;\n            }\n            // track google-auth-library-nodejs version:\n            const authVersion = `auth/${pkg.version}`;\n            if (opts.headers['x-goog-api-client'] &&\n                !opts.headers['x-goog-api-client'].includes(authVersion)) {\n                opts.headers['x-goog-api-client'] = `${opts.headers['x-goog-api-client']} ${authVersion}`;\n            }\n            else if (!opts.headers['x-goog-api-client']) {\n                const nodeVersion = process.version.replace(/^v/, '');\n                opts.headers['x-goog-api-client'] = `gl-node/${nodeVersion} ${authVersion}`;\n            }\n        }\n        return opts;\n    }\n    request(opts, callback) {\n        // ensure the user isn't passing in request-style options\n        opts = this.configure(opts);\n        try {\n            options_1.validate(opts);\n        }\n        catch (e) {\n            if (callback) {\n                return callback(e);\n            }\n            else {\n                throw e;\n            }\n        }\n        if (callback) {\n            gaxios_1.request(opts).then(r => {\n                callback(null, r);\n            }, e => {\n                callback(this.processError(e));\n            });\n        }\n        else {\n            return gaxios_1.request(opts).catch(e => {\n                throw this.processError(e);\n            });\n        }\n    }\n    /**\n     * Changes the error to include details from the body.\n     */\n    processError(e) {\n        const res = e.response;\n        const err = e;\n        const body = res ? res.data : null;\n        if (res && body && body.error && res.status !== 200) {\n            if (typeof body.error === 'string') {\n                err.message = body.error;\n                err.code = res.status.toString();\n            }\n            else if (Array.isArray(body.error.errors)) {\n                err.message = body.error.errors\n                    .map((err2) => err2.message)\n                    .join('\\n');\n                err.code = body.error.code;\n                err.errors = body.error.errors;\n            }\n            else {\n                err.message = body.error.message;\n                err.code = body.error.code || res.status;\n            }\n        }\n        else if (res && res.status >= 400) {\n            // Consider all 4xx and 5xx responses errors.\n            err.message = body;\n            err.code = res.status.toString();\n        }\n        return err;\n    }\n}\nexports.DefaultTransporter = DefaultTransporter;\n/**\n * Default user agent.\n */\nDefaultTransporter.USER_AGENT = `${PRODUCT_NAME}/${pkg.version}`;\n//# sourceMappingURL=transporters.js.map"],"mappings":"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"},"metadata":{},"sourceType":"script"}